/*!
 * hozzz
 * @version 0.0.0
 * @time 2014-06-02 23:25
 */

var H=H||{};H.User=Backbone.Model.extend({isAuth:function(){return!!this.get("id")},login:function(){},logout:function(){}});var H=H||{};H.Router=Backbone.Router.extend({routes:{"album/:id":"checkOutAlbum","user/:id":"checkOutUser"},checkOutAlbum:function(a){console.log(a)},checkOutUser:function(a){console.log(a)}}),Backbone.history.start({pushState:!0}),H.router=new H.Router;var H=H||{};H.View=Backbone.View.extend({className:"View",initialize:function(a){a&&(a.options&&(this.options=a.options),this.name=a.name?a.name:"",a.data&&(this.data=a.data)),this.$el.addClass(this.className),this.children={},this.$el.removeAttr("id")},childListen:function(){},size:function(){return this.children.length},childAt:function(a){return this.children[a]},getChildViewById:function(a){return this.children[a]},setChildViewById:function(a,b){this.children[a]=b},getChildViewByElement:function(a){return _.filter(this.children,function(b){return b.$el.is(a)})[0]},appendChildView:function(a){this.$el.append(a.html),H.viewFactory.append(siblingViewData.view,this),console.log("appended children")},removeChild:function(){},appendSiblingView:function(a){this.parent.$el.append(a.html),H.viewFactory.append(a.view,this.parent),console.log("appended a sibling!!")},destroy:function(){_.each(this.children,function(a){a.destroy()}),delete this.parent.children[this.cid],this.$el.empty(),this.remove()},_replaceEle:function(a){this.$el.before(a),this.destroy()},_replaceView:function(a){var b=H.viewFactory.create(a);b.parent=this.parent,this.parent.setChildViewById(b.cid,b),this.parent=null,delete this.$el,delete this.el},replaceWith:function(a){this._replaceEle(a.html),this._replaceView(a.modules)},showLoading:function(){console.log("Loading...")},hideLoading:function(){console.log("hide loading")},errorNotify:function(a){console.log(a)}});var H=H||{};H.loadViewConstructor=function(a){return H.views[a]},H.viewFactory={create:function(a){var b=new(H.loadViewConstructor(a.name))({el:$("#"+a.uid),options:a.options,name:a.name,data:a.data});return/Items$/.test(a.name)&&(H.currentViewer=b),a.children?(b.children=_.map(a.children,function(a){var c=H.viewFactory.create(a);return c.parent=b,b.setChildViewById(c.cid,c),[c.cid,c]}),b.children=_.object(b.children)):delete b.children,b},append:function(a,b){var c=H.viewFactory.create(a);b.setChildViewById(c.cid,c)}};var H=H||{};H.Resource=function(a,b){this.name=a,this.data=JSON.stringify(b)},_.extend(H.Resource.prototype,{call:function(a,b){var c=this._call(a);return b&&b.success&&c.done(b.success),b&&b.error&&c.fail(b.error),b&&b.complete&&c.always(b.complete),c.fail(function(a){H.View.prototype.hideLoading(),H.View.prototype.errorNotify(a)}),c.done(function(){H.View.prototype.hideLoading()}),c},_call:function(a){var b=new $.Deferred,c="/hozzzone/public/resources/"+this.name+"/"+a,d={data:this.data};return $.ajax({cache:!1,url:c,data:d,dataType:"json",type:a,complete:function(a,c){if("abort"===c)return void b.reject("aborted");if("error"===c)return void b.reject("error, connection failed!");var d=JSON.parse(a.responseText);b.resolve(d)}}),b.promise()},get:function(a){return this.call("get",a)},post:function(a){return this.call("post",a)}}),H.resourceFactory=function(a,b){return new H.Resource(a,b)};var H=H||{};H.views={},H.views.app=H.View.extend(),H.views.item=H.View.extend({events:{"click .like":"sendLikeButton","click .avatar":"checkOutAuthor"},sendLikeButton:function(){return!1},checkOutAuthor:function(a){var b=this.data;return H.router.navigate("user/"+b.authorId,{trigger:!0}),this.showLoading(),a.preventDefault(),!1}}),H.views.likeButton=H.View.extend(),H.views.Items=H.View.extend({checkOutPic:function(a){var b,c=$(a.currentTarget);c.hasClass("content")&&(b=c.closest(".item"));var d=this;d.showLoading();var e=this.getChildViewByElement(b),f=H.resourceFactory("album",{albumId:e.albumId});return f=f.get({success:function(a){d.appendSiblingView(a)}}),a.preventDefault(),a.stopPropagation(),!1}}),H.views.squareItems=H.views.Items.extend({events:{"click .content":"checkOutPic"}}),H.views.defaultItems=H.views.Items.extend({events:{"click .content":"checkOutPic","mouseenter .front":"dropDownAlbum"},dropDownAlbum:function(a){var b=$(a.currentTarget).closest(".item");$(a.currentTarget).hasClass("seen")||b.addClass("seen")}});var H=H||{};H.views.Button=H.View.extend({events:{click:"onClick"}}),H.views.addHoz=H.views.Button.extend({onClick:function(){console.log("add")}}),H.views.backToTop=H.views.Button.extend({onClick:function(){return $("body").animate({scrollTop:0},{duration:350,complete:function(){console.log("fuck you")}}),!1}});var H=H||{};H.views.layoutButton=H.View.extend(),H.views.rightBar=H.View.extend(),H.views.viewLayout=H.View.extend({events:{"click li:not(.active)":"changeViewLayout"},changeViewLayout:function(a){var b=this.getChildViewByElement($(a.currentTarget));console.log("change to view: "+b.data.view);var c=H.resourceFactory(b.data.view+"Items",{});c.get({success:function(a){console.log(a),H.currentViewer.replaceWith(a)}})}}),H.views.searchForm=H.View.extend({events:{"focus .search-text":"widenInputBox","blur .search-text":"shortenInputBox",submit:"onSubmit"},onSubmit:function(){return console.log("you just submitted!"),!1},widenInputBox:function(a){$(a.currentTarget).animate({width:150})},shortenInputBox:function(a){$(a.currentTarget).animate({width:70})}});var H=H||{};H.views.Navigate=H.View.extend();var H=H||{};H.views.Album=H.View.extend({}),H.views.subscribeBtn=H.views.Button.extend({onClick:function(){return console.log("subscribed!!!"),!1}}),H.views.commentBtn=H.views.Button.extend({onClick:function(){return console.log("just commented!!!"),!1}}),H.views.commentReplyBtn=H.views.Button.extend({onClick:function(){console.log("replied!!")}});var H=H||{};H.init=function(a){H.app=H.viewFactory.create(a.modules)};
//# sourceMappingURL=bundle.min.map